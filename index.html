<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>ä¸‰ç¨®ã®ç¥å™¨ å®‰å…¨æ´»å‹•ç¢ºèªç¥¨</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=DM+Mono:wght@500&display=swap');

  :root {
    --c-bg: #0f1117;
    --c-surface: #1a1d27;
    --c-card: #21253a;
    --c-border: #2e3350;
    --c-accent: #f59e0b;
    --c-accent2: #3b82f6;
    --c-ok: #22c55e;
    --c-ng: #ef4444;
    --c-text: #e8eaf0;
    --c-muted: #6b7280;
    --c-label: #a0a8c0;
    --r: 12px;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--c-bg);
    color: var(--c-text);
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 15px;
    min-height: 100vh;
    padding-bottom: 120px;
  }

  /* ===== HEADER ===== */
  .header {
    background: linear-gradient(135deg, #1a1d27 0%, #0f1117 100%);
    border-bottom: 2px solid var(--c-accent);
    padding: 20px 16px 16px;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  .header-badge {
    display: inline-block;
    background: var(--c-accent);
    color: #000;
    font-size: 10px;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 4px;
    letter-spacing: .06em;
    margin-bottom: 6px;
  }
  .header h1 {
    font-size: 17px;
    font-weight: 900;
    letter-spacing: .02em;
    line-height: 1.3;
  }
  .header h1 span { color: var(--c-accent); }

  /* ===== PROGRESS ===== */
  .progress-wrap {
    padding: 10px 16px 0;
  }
  .progress-bar-bg {
    background: var(--c-border);
    border-radius: 99px;
    height: 6px;
    overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--c-accent2), var(--c-accent));
    border-radius: 99px;
    transition: width .4s ease;
    width: 0%;
  }
  .progress-label {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: var(--c-muted);
    margin-top: 4px;
  }
  .score-display {
    font-family: 'DM Mono', monospace;
    font-size: 13px;
    color: var(--c-accent);
  }

  /* ===== SECTION ===== */
  .section {
    margin: 16px 12px 0;
    background: var(--c-surface);
    border: 1px solid var(--c-border);
    border-radius: var(--r);
    overflow: hidden;
  }
  .section-header {
    background: var(--c-card);
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    border-bottom: 1px solid var(--c-border);
  }
  .section-num {
    background: var(--c-accent);
    color: #000;
    font-weight: 900;
    font-size: 12px;
    width: 26px;
    height: 26px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .section-title {
    font-size: 14px;
    font-weight: 700;
    flex: 1;
    line-height: 1.4;
  }
  .section-pts {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--c-muted);
    flex-shrink: 0;
  }

  /* ===== BASIC INFO ===== */
  .basic-info {
    padding: 14px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }
  .basic-info .full { grid-column: 1 / -1; }
  .field-label {
    font-size: 11px;
    color: var(--c-label);
    margin-bottom: 5px;
    font-weight: 500;
  }
  input[type=text], input[type=date], input[type=number], select, textarea {
    width: 100%;
    background: var(--c-bg);
    border: 1px solid var(--c-border);
    border-radius: 8px;
    color: var(--c-text);
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 14px;
    padding: 10px 12px;
    outline: none;
    transition: border-color .2s;
    -webkit-appearance: none;
  }
  input:focus, select:focus, textarea:focus {
    border-color: var(--c-accent2);
  }
  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%236b7280' d='M6 8L0 0h12z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 32px;
  }
  textarea {
    resize: none;
    line-height: 1.6;
  }

  /* ===== CHECK ITEM ===== */
  .check-item {
    padding: 14px 16px;
    border-bottom: 1px solid var(--c-border);
  }
  .check-item:last-child { border-bottom: none; }
  .check-q {
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 12px;
    font-weight: 500;
  }
  .check-q .q-num {
    display: inline-block;
    background: var(--c-accent2);
    color: #fff;
    font-size: 11px;
    font-weight: 700;
    padding: 1px 6px;
    border-radius: 4px;
    margin-right: 6px;
    vertical-align: middle;
  }

  /* ===== AB TOGGLE ===== */
  .ab-toggle {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-bottom: 10px;
  }
  .ab-toggle label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px;
    background: var(--c-bg);
    border: 2px solid var(--c-border);
    border-radius: 10px;
    cursor: pointer;
    transition: all .2s;
    font-size: 14px;
    font-weight: 700;
  }
  .ab-toggle input[type=radio] { display: none; }
  .ab-toggle label.opt-a:has(input:checked) {
    background: #052e16;
    border-color: var(--c-ok);
    color: var(--c-ok);
  }
  .ab-toggle label.opt-b:has(input:checked) {
    background: #1f0505;
    border-color: var(--c-ng);
    color: var(--c-ng);
  }
  .ab-toggle label .pts {
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    opacity: .7;
  }

  /* ===== REASON FIELD ===== */
  .reason-field {
    display: none;
    margin-top: 8px;
  }
  .reason-field.show { display: block; }
  .reason-field textarea {
    font-size: 13px;
    padding: 8px 12px;
  }
  .reason-label {
    font-size: 11px;
    color: var(--c-ng);
    margin-bottom: 5px;
    font-weight: 600;
  }

  /* ===== KY SECTION ===== */
  .ky-fields {
    padding: 14px 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    border-bottom: 1px solid var(--c-border);
  }

  /* ===== SANSHU (ä¸‰å·¥ç¨®) ===== */
  .sanshu-check {
    padding: 14px 16px;
    border-bottom: 1px solid var(--c-border);
  }
  .sanshu-title {
    font-size: 13px;
    color: var(--c-label);
    margin-bottom: 10px;
  }
  .sanshu-items {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .sanshu-toggle {
    display: flex;
    align-items: center;
    gap: 10px;
    background: var(--c-bg);
    border: 1px solid var(--c-border);
    border-radius: 8px;
    padding: 11px 14px;
    cursor: pointer;
  }
  .sanshu-toggle input[type=checkbox] { display: none; }
  .sanshu-box {
    width: 22px;
    height: 22px;
    border: 2px solid var(--c-border);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 14px;
    transition: all .2s;
  }
  .sanshu-toggle:has(input:checked) {
    border-color: var(--c-accent);
    background: #1c1505;
  }
  .sanshu-toggle:has(input:checked) .sanshu-box {
    background: var(--c-accent);
    border-color: var(--c-accent);
    color: #000;
  }
  .sanshu-toggle:has(input:checked) .sanshu-box::after { content: 'â—‹'; font-weight: 700; }
  .sanshu-name { font-size: 14px; font-weight: 500; }

  /* ===== SUBMIT ===== */
  .submit-area {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, var(--c-bg) 70%, transparent);
    padding: 16px 16px 24px;
    z-index: 200;
  }
  .submit-btn {
    width: 100%;
    background: linear-gradient(135deg, var(--c-accent2), #6366f1);
    border: none;
    border-radius: 14px;
    color: #fff;
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 16px;
    font-weight: 700;
    padding: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: opacity .2s, transform .1s;
    letter-spacing: .04em;
  }
  .submit-btn:active { transform: scale(.98); opacity: .9; }
  .submit-icon { font-size: 20px; }

  /* ===== MODAL ===== */
  .modal-bg {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.75);
    z-index: 500;
    align-items: flex-end;
    padding: 0;
  }
  .modal-bg.open { display: flex; }
  .modal {
    background: var(--c-surface);
    border-radius: 20px 20px 0 0;
    border-top: 2px solid var(--c-accent);
    padding: 24px 20px 40px;
    width: 100%;
    animation: slideUp .3s ease;
  }
  @keyframes slideUp {
    from { transform: translateY(60px); opacity: 0; }
    to   { transform: translateY(0);    opacity: 1; }
  }
  .modal h2 {
    font-size: 18px;
    font-weight: 900;
    text-align: center;
    margin-bottom: 6px;
  }
  .modal-score {
    text-align: center;
    font-family: 'DM Mono', monospace;
    font-size: 48px;
    font-weight: 700;
    color: var(--c-accent);
    margin: 16px 0 4px;
    line-height: 1;
  }
  .modal-score span { font-size: 20px; color: var(--c-muted); }
  .modal-msg {
    text-align: center;
    color: var(--c-label);
    font-size: 14px;
    margin-bottom: 20px;
  }
  .modal-close {
    width: 100%;
    background: var(--c-card);
    border: 1px solid var(--c-border);
    border-radius: 12px;
    color: var(--c-text);
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 15px;
    font-weight: 700;
    padding: 14px;
    cursor: pointer;
  }
  .result-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--c-border);
    font-size: 13px;
  }
  .result-row:last-child { border-bottom: none; }
  .result-pts {
    font-family: 'DM Mono', monospace;
    font-size: 13px;
    font-weight: 700;
  }
  .result-pts.ok { color: var(--c-ok); }
  .result-pts.ng { color: var(--c-ng); }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div class="header-badge">ä»¤å’Œ7å¹´åº¦æ”¹è¨‚ç‰ˆ</div>
  <h1>ã€Œä¸‰ç¨®ã®ç¥å™¨ã€<span>å®‰å…¨æ´»å‹•</span>ç¢ºèªç¥¨</h1>
  <div class="progress-wrap">
    <div class="progress-bar-bg"><div class="progress-bar-fill" id="progressBar"></div></div>
    <div class="progress-label">
      <span id="progressLabel">0 / 12 å›ç­”æ¸ˆã¿</span>
      <span class="score-display" id="scoreLabel">0 / 100ç‚¹</span>
    </div>
  </div>
</div>

<form id="mainForm">

  <!-- åŸºæœ¬æƒ…å ± -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">åŸº</div>
      <div class="section-title">åŸºæœ¬æƒ…å ±</div>
    </div>
    <div class="basic-info">
      <div class="full">
        <div class="field-label">å®Ÿæ–½æ—¥</div>
        <input type="date" id="jisshi_date">
      </div>
      <div class="full">
        <div class="field-label">ç¾å ´ç•¥ç§°</div>
        <input type="text" id="genba_name" placeholder="ä¾‹ï¼šâ—‹â—‹ãƒ“ãƒ«æ–°ç¯‰å·¥äº‹">
      </div>
      <div>
        <div class="field-label">ä¼šç¤¾å</div>
        <input type="text" id="company_name" placeholder="æ ªå¼ä¼šç¤¾â—‹â—‹">
      </div>
      <div>
        <div class="field-label">æ°å</div>
        <input type="text" id="worker_name" placeholder="å±±ç”° å¤ªéƒ">
      </div>
      <div>
        <div class="field-label">å¹´é½¢</div>
        <input type="number" id="worker_age" placeholder="35">
      </div>
      <div>
        <div class="field-label">çµŒé¨“å¹´æ•°</div>
        <input type="number" id="exp_years" placeholder="10">
      </div>
      <div class="full">
        <div class="field-label">è·ç¨®</div>
        <select id="shokushu">
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option>è·é•·</option>
          <option>åœŸå·¥</option>
          <option>ã¨ã³å·¥</option>
          <option>é›å†¶å·¥</option>
          <option>å¤§å·¥</option>
          <option>é‰„ç­‹å·¥</option>
          <option>é‡æ©ŸOP</option>
          <option>ãã®ä»–</option>
        </select>
      </div>
      <div class="full">
        <div class="field-label">å½“æ—¥ã®ä½œæ¥­å†…å®¹</div>
        <textarea id="today_work" rows="2" placeholder="ä¾‹ï¼š2éšã‚¹ãƒ©ãƒ–å‹æ çµ„ç«‹ä½œæ¥­"></textarea>
      </div>
      <div class="full">
        <div class="field-label">ç¢ºèªè€…</div>
        <input type="text" id="confirmer" placeholder="ç¢ºèªè€…æ‰€å±ä¼šç¤¾ãƒ»æ°å">
      </div>
    </div>
  </div>

  <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³1ï¼šå®‰å…¨ãƒªãƒ¼ãƒ•ãƒ¬ãƒƒãƒˆ -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">1</div>
      <div class="section-title">æœ€æ–°ã®å®‰å…¨ãƒªãƒ¼ãƒ•ãƒ¬ãƒƒãƒˆã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div>
      <div class="section-pts">5ç‚¹</div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â¶</span>æœ€æ–°ã®å®‰å…¨ãƒªãƒ¼ãƒ•ãƒ¬ãƒƒãƒˆã®æ‰€æŒ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q1','A',5)">
          <input type="radio" name="q1" value="A">A. æŒã£ã¦ã„ã‚‹<span class="pts">+5ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q1','B',0)">
          <input type="radio" name="q1" value="B">B. æŒã£ã¦ã„ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
      <div class="reason-field" id="reason_q1">
        <div class="reason-label">â–¶ æŒã£ã¦ã„ãªã„ç†ç”±ã‚’å…¥åŠ›</div>
        <textarea rows="2" placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
      </div>
    </div>
  </div>

  <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³2ï¼šä¸‰ç¨®ã®ç¥å™¨ -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">2</div>
      <div class="section-title">ä¸‰ç¨®ã®ç¥å™¨å®‰å…¨æ´»å‹•ã‚’ç†è§£ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</div>
      <div class="section-pts">10ç‚¹</div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â·</span>ä¸‰ç¨®ã®ç¥å™¨å®‰å…¨æ´»å‹•ã®ç†è§£</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q2','A',10)">
          <input type="radio" name="q2" value="A">A. ç†è§£ã—ã¦ã„ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q2','B',0)">
          <input type="radio" name="q2" value="B">ã—ã¦ã„ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
      <div class="reason-field" id="reason_q2">
        <div class="reason-label">â–¶ ç†è§£ã—ã¦ã„ãªã„ç†ç”±ã‚’å…¥åŠ›</div>
        <textarea rows="2" placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
      </div>
    </div>
  </div>

  <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³3ï¼šãƒ’ãƒ¤ãƒªãƒ»ãƒãƒƒãƒˆ -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">3</div>
      <div class="section-title">ãƒ’ãƒ¤ãƒªãƒ»ãƒãƒƒãƒˆæ´»å‹•</div>
      <div class="section-pts">30ç‚¹</div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â¸</span>ã‚±ã‚¬ã‚’ã—ãã†ã«ãªã£ãŸå ´åˆã€ã™ãã«å¤§å´ç¤¾å“¡ã¾ãŸã¯è·é•·ã«å ±å‘Šã—ã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q3','A',10)">
          <input type="radio" name="q3" value="A">A. ã¨ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q3','B',0)">
          <input type="radio" name="q3" value="B">B. ã¨ã‚‰ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â¹</span>è‡ªåˆ†ã®å¿ƒã«ã¨ã©ã‚ã€è‡ªåˆ†ãªã‚Šã«å¯¾ç­–ã‚’ã¨ã‚Šã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q4','A',10)">
          <input type="radio" name="q4" value="A">A. ã™ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q4','B',0)">
          <input type="radio" name="q4" value="B">B. ã—ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
      <div class="reason-field" id="reason_q34">
        <div class="reason-label">â–¶ â¸ãƒ»â¹ã§Bã®å ´åˆã€ç†ç”±ã‚’å…¥åŠ›</div>
        <textarea rows="2" placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
      </div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">âº</span>ã€Œãƒ’ãƒ¤ãƒªãƒã‚¢ãƒ—ãƒªã€ã¾ãŸã¯ãƒã‚§ãƒƒã‚¯ã‚·ãƒ¼ãƒˆã§ã®å ±å‘Šæ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q5','A',5)">
          <input type="radio" name="q5" value="A">A. çŸ¥ã£ã¦ã„ã‚‹<span class="pts">+5ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q5','B',0)">
          <input type="radio" name="q5" value="B">B. çŸ¥ã‚‰ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â»</span>ä»Šã¾ã§ã®ãƒ’ãƒ¤ãƒªãƒ»ãƒãƒƒãƒˆä½“é¨“ã‚’å ±å‘Šã—ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q6','A',5)">
          <input type="radio" name="q6" value="A">A. ã‚ã‚‹<span class="pts">+5ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q6','B',0)">
          <input type="radio" name="q6" value="B">B. ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â¼</span>ä»Šå¾Œã‚‚å ±å‘Šã‚’è¡Œã£ã¦ã„ãã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q7','A',10)">
          <input type="radio" name="q7" value="A">A. è¡Œã£ã¦ã„ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q7','B',0)">
          <input type="radio" name="q7" value="B">B. è¡Œã£ã¦ã„ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
  </div>

  <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³4ï¼šï¼‘äººKY -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">4</div>
      <div class="section-title">å½“æ—¥ã®ã€Œï¼‘äººKYã€ã®å®Ÿæ–½</div>
      <div class="section-pts">30ç‚¹</div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â½</span>å¤§å´å»ºè¨­ã®ç½å®³äº‹ä¾‹ãƒ»å†ç™ºé˜²æ­¢å¯¾ç­–ã€ã¾ãŸã¯ã€Œï¼”ã¤ã®ãªã„ã‹ï¼‹ï¼‘é‹å‹•ã€ã‚’å‚è€ƒã«ã™ã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q8','A',10)">
          <input type="radio" name="q8" value="A">A. çŸ¥ã£ã¦ã„ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q8','B',0)">
          <input type="radio" name="q8" value="B">B. çŸ¥ã‚‰ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
    <div class="ky-fields">
      <div>
        <div class="field-label">æœ€ã‚‚å±ãªã„ã¨æ€ã‚ã‚Œã‚‹ä½œæ¥­å†…å®¹</div>
        <textarea rows="2" id="ky_kiken" placeholder="ä¾‹ï¼šè¶³å ´ä¸Šã§ã®è³‡æé‹æ¬æ™‚ã®è»¢è½"></textarea>
      </div>
      <div>
        <div class="field-label">å±é™ºã®ãƒã‚¤ãƒ³ãƒˆï¼ˆã©ã“ã«ã©ã‚“ãªå±é™ºãŒã‚ã‚‹ã‹ï¼‰</div>
        <textarea rows="2" id="ky_point" placeholder="ä¾‹ï¼šè¶³å ´ç«¯éƒ¨ã§ãƒãƒ©ãƒ³ã‚¹ã‚’å´©ã—ã‚„ã™ã„"></textarea>
      </div>
      <div>
        <div class="field-label">è‡ªåˆ†ã§æ±ºã‚ãŸè¡Œå‹•ç›®æ¨™</div>
        <textarea rows="2" id="ky_target" placeholder="ä¾‹ï¼šå¿…ãšå‘½ç¶±ã‚’ä½¿ç”¨ã—ç«¯éƒ¨ã«ã¯è¿‘ã¥ã‹ãªã„"></textarea>
      </div>
    </div>
  </div>

  <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³5ï¼šæŒ‡å·®å‘¼ç§° -->
  <div class="section">
    <div class="section-header">
      <div class="section-num">5</div>
      <div class="section-title">å½“æ—¥ã®ã€ŒæŒ‡å·®å‘¼ç§°ã€æ´»å‹•</div>
      <div class="section-pts">40ç‚¹</div>
    </div>

    <!-- ä¸‰å·¥ç¨®ãƒã‚§ãƒƒã‚¯ -->
    <div class="sanshu-check">
      <div class="sanshu-title">ä»Šæ—¥ã®ä½œæ¥­ã§ã€Œä¸‰å·¥ç¨®ä½œæ¥­ã€ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿï¼ˆè©²å½“ã™ã‚‹ã‚‚ã®ã«â—‹ï¼‰</div>
      <div class="sanshu-items">
        <label class="sanshu-toggle">
          <input type="checkbox" id="sanshu1">
          <div class="sanshu-box"></div>
          <span class="sanshu-name">é«˜æ‰€ãƒ»é–‹å£éƒ¨ãƒ»æ³•è‚©ä»˜è¿‘ä½œæ¥­</span>
        </label>
        <label class="sanshu-toggle">
          <input type="checkbox" id="sanshu2">
          <div class="sanshu-box"></div>
          <span class="sanshu-name">ç‰æ›ä½œæ¥­</span>
        </label>
        <label class="sanshu-toggle">
          <input type="checkbox" id="sanshu3">
          <div class="sanshu-box"></div>
          <span class="sanshu-name">è»Šä¸¡ç³»å»ºè¨­æ©Ÿæ¢°ä½¿ç”¨ï¼ˆè¿‘æ¥ï¼‰ä½œæ¥­</span>
        </label>
      </div>
    </div>

    <div class="check-item">
      <div class="check-q"><span class="q-num">â¾</span>é«˜æ‰€ãƒ»é–‹å£éƒ¨ãƒ»æ³•è‚©ä»˜è¿‘ä½œæ¥­ã§æŒ‡å·®å‘¼ç§°ã‚’è¡Œã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q9','A',10)">
          <input type="radio" name="q9" value="A">A. è¡Œã£ã¦ã„ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q9','B',0)">
          <input type="radio" name="q9" value="B">B. è¡Œã£ã¦ã„ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â¿</span>ç‰æ›ä½œæ¥­ã¯ã€Œï¼“ãƒ»ï¼“ãƒ»ï¼“é‹å‹•ã€ã§è¡Œã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q10','A',10)">
          <input type="radio" name="q10" value="A">A. è¡Œã£ã¦ã„ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q10','B',0)">
          <input type="radio" name="q10" value="B">B. è¡Œã£ã¦ã„ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â“«</span>è»Šä¸¡ç³»å»ºè¨­æ©Ÿæ¢°ä½¿ç”¨ï¼ˆè¿‘æ¥ï¼‰ä½œæ¥­ã§ã€Œãƒ‘ãƒ¼ã‚°ãƒ¼åˆå›³ã€ã‚’è¡Œã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q11','A',10)">
          <input type="radio" name="q11" value="A">A. è¡Œã£ã¦ã„ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q11','B',0)">
          <input type="radio" name="q11" value="B">B. è¡Œã£ã¦ã„ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
    <div class="check-item">
      <div class="check-q"><span class="q-num">â“¬</span>æŒ‡å·®å‘¼ç§°æ´»å‹•ã¯ä»²é–“åŒå£«ã§ã€Œã‚¢ãƒ†ã‚¹ãƒˆé‹å‹•ã€ã«ã‚ˆã‚Šè¡Œã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</div>
      <div class="ab-toggle">
        <label class="opt-a" onclick="handleAB(this,'q12','A',10)">
          <input type="radio" name="q12" value="A">A. è¡Œã£ã¦ã„ã‚‹<span class="pts">+10ç‚¹</span>
        </label>
        <label class="opt-b" onclick="handleAB(this,'q12','B',0)">
          <input type="radio" name="q12" value="B">B. è¡Œã£ã¦ã„ãªã„<span class="pts">0ç‚¹</span>
        </label>
      </div>
    </div>
  </div>

</form>

<!-- SUBMIT BUTTON -->
<div class="submit-area">
  <button type="button" class="submit-btn" onclick="openModal()">
    <span class="submit-icon">ğŸ“‹</span> é›†è¨ˆã—ã¦ç¢ºèªã™ã‚‹
  </button>
</div>

<!-- MODAL -->
<div class="modal-bg" id="modalBg" onclick="closeModalBg(event)">
  <div class="modal">
    <h2>ğŸ“Š è©•ä¾¡çµæœ</h2>
    <div class="modal-score" id="modalScore">0 <span>/ 100ç‚¹</span></div>
    <div class="modal-msg" id="modalMsg"></div>
    <div id="modalDetail" style="margin-bottom:20px;"></div>
    <button class="modal-close" onclick="closeModal()">é–‰ã˜ã‚‹</button>
  </div>
</div>

<script>
  // é…ç‚¹å®šç¾©
  const QUESTIONS = [
    { name:'q1',  pts:5,  label:'â¶ å®‰å…¨ãƒªãƒ¼ãƒ•ãƒ¬ãƒƒãƒˆæ‰€æŒ' },
    { name:'q2',  pts:10, label:'â· ä¸‰ç¨®ã®ç¥å™¨ç†è§£' },
    { name:'q3',  pts:10, label:'â¸ å ±å‘Šè¡Œå‹•ï¼ˆå ±å‘Šã™ã‚‹ï¼‰' },
    { name:'q4',  pts:10, label:'â¹ è‡ªåˆ†ãªã‚Šã®å¯¾ç­–' },
    { name:'q5',  pts:5,  label:'âº ãƒ’ãƒ¤ãƒªãƒå ±å‘Šæ–¹æ³•æŠŠæ¡' },
    { name:'q6',  pts:5,  label:'â» ãƒ’ãƒ¤ãƒªãƒãƒƒãƒˆå ±å‘ŠçµŒé¨“' },
    { name:'q7',  pts:10, label:'â¼ ä»Šå¾Œã‚‚å ±å‘Šç¶™ç¶š' },
    { name:'q8',  pts:10, label:'â½ 1äººKYå‚è€ƒçŸ¥è­˜' },
    { name:'q9',  pts:10, label:'â¾ é«˜æ‰€ç­‰ æŒ‡å·®å‘¼ç§°' },
    { name:'q10', pts:10, label:'â¿ ç‰æ›ï¼“ãƒ»ï¼“ãƒ»ï¼“é‹å‹•' },
    { name:'q11', pts:10, label:'â“« ãƒ‘ãƒ¼ã‚°ãƒ¼åˆå›³' },
    { name:'q12', pts:10, label:'â“¬ ã‚¢ãƒ†ã‚¹ãƒˆé‹å‹•' },
  ];

  const answers = {};

  function handleAB(label, qname, val, pts) {
    answers[qname] = { val, pts: val === 'A' ? pts : 0 };

    // Bé¸æŠæ™‚ã«ç†ç”±æ¬„è¡¨ç¤º
    const reasonMap = { q1:'reason_q1', q2:'reason_q2', q3:'reason_q34', q4:'reason_q34' };
    if (reasonMap[qname]) {
      const el = document.getElementById(reasonMap[qname]);
      // q3 or q4 ã®ã©ã¡ã‚‰ã‹ãŒBãªã‚‰è¡¨ç¤º
      if (qname === 'q3' || qname === 'q4') {
        const q3val = answers['q3'] ? answers['q3'].val : null;
        const q4val = answers['q4'] ? answers['q4'].val : null;
        el.classList.toggle('show', q3val === 'B' || q4val === 'B');
      } else {
        el.classList.toggle('show', val === 'B');
      }
    }
    updateProgress();
  }

  function updateProgress() {
    const answered = Object.keys(answers).length;
    const total = QUESTIONS.length;
    const score = Object.values(answers).reduce((s, a) => s + a.pts, 0);
    const maxScore = QUESTIONS.reduce((s, q) => s + q.pts, 0);

    document.getElementById('progressBar').style.width = (answered / total * 100) + '%';
    document.getElementById('progressLabel').textContent = `${answered} / ${total} å›ç­”æ¸ˆã¿`;
    document.getElementById('scoreLabel').textContent = `${score} / ${maxScore}ç‚¹`;
  }

  function openModal() {
    const score = Object.values(answers).reduce((s, a) => s + a.pts, 0);
    document.getElementById('modalScore').innerHTML = `${score} <span>/ 100ç‚¹</span>`;

    let msg = '';
    if (score >= 90) msg = 'ğŸŒŸ å„ªç§€ï¼å®‰å…¨æ„è­˜ãŒéå¸¸ã«é«˜ã„ã§ã™';
    else if (score >= 70) msg = 'âœ… è‰¯å¥½ã€‚å¼•ãç¶šãæ„è­˜ã‚’é«˜ã‚ã¾ã—ã‚‡ã†';
    else if (score >= 50) msg = 'âš ï¸ ã‚‚ã†å°‘ã—æ”¹å–„ãŒå¿…è¦ã§ã™';
    else msg = 'ğŸ”´ å®‰å…¨æ´»å‹•ã®è¦‹ç›´ã—ãŒå¿…è¦ã§ã™';
    document.getElementById('modalMsg').textContent = msg;

    let detail = '';
    QUESTIONS.forEach(q => {
      const a = answers[q.name];
      const got = a ? a.pts : 0;
      const ok = got === q.pts;
      detail += `<div class="result-row">
        <span>${q.label}</span>
        <span class="result-pts ${ok ? 'ok' : 'ng'}">${got}/${q.pts}ç‚¹</span>
      </div>`;
    });
    document.getElementById('modalDetail').innerHTML = detail;

    document.getElementById('modalBg').classList.add('open');
  }

  function closeModal() {
    document.getElementById('modalBg').classList.remove('open');
  }
  function closeModalBg(e) {
    if (e.target === document.getElementById('modalBg')) closeModal();
  }

  // ä»Šæ—¥ã®æ—¥ä»˜ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚»ãƒƒãƒˆ
  const today = new Date();
  const yyyy = today.getFullYear();
  const mm = String(today.getMonth()+1).padStart(2,'0');
  const dd = String(today.getDate()).padStart(2,'0');
  document.getElementById('jisshi_date').value = `${yyyy}-${mm}-${dd}`;

  updateProgress();
</script>
</body>
</html>
